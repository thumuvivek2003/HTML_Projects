<meta name="viewport" content="width=device-width, initial-scale=0.8">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
/>


<!-- swalert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cedarville+Cursive&family=Lato:wght@300;400&family=Lemon&family=Oswald:wght@300;400;500&family=Playfair+Display&family=Poppins:wght@300;400&display=swap" rel="stylesheet">



<div class="container">
    <div class='wrapper'>
        <div class='app-title'>Type Perfector</div>
        <div class='app-current-display'>
            <span class="app-current"></span>
        </div>
        <div class='app-options'>
            <div class="app-option" onclick="makeAppBody('Alphabets',this)">Alphabets</div>
            <div class="app-option" onclick="makeAppBody('Capitals',this)">Capitals</div>
            <div class="app-option" onclick="makeAppBody('Smalls',this)">Smalls</div>
            <div class="app-option" onclick="makeAppBody('Numbers',this)">Numbers</div>
            <div class="app-option" onclick="makeAppBody('Symbols',this)">Symbols</div>
            <div class="app-option" onclick="makeAppBody('Mixed',this)">Mixed</div>

            <div class="app-option" onclick="makeAppBody('LeftHand',this)">Left Hand</div>
            <div class="app-option" onclick="makeAppBody('RightHand',this)">Right Hand</div>

            <div class="app-option" onclick="makeAppBody('LeftHandWRight',this)">Left Hand With Right Shift</div>
            <div class="app-option" onclick="makeAppBody('RightHandWLeft',this)">Right Hand With Left Shift</div>

            <div class="app-option" onclick="makeAppBody('LeftHandWORight',this)">Left Hand WithOut Right Shift</div>
            <div class="app-option" onclick="makeAppBody('RightHandWOLeft',this)">Right Hand WithOut Left Shift</div>

            <input type="text" id="custom_text"  placeholder="Learn your own chars..."/>
            <div class="app-option" onclick="makeAppBody('custom',this)">Custom Text</div>
        </div>
        <div class="app-body"></div>
        <div class="score-display">
            <div class="wrongs-board">0 Wrongs</div>
            <div class="score-board">0/20</div>
            <div class="time-board">Time : 00 : 00 : 00 </div>
        </div>
    </div>
</div>
<div style="display:flex;justify-content:center;align-items:center;width:100%;position:fixed;bottom:0px;text-align:center;color:white">
    Developed By Vivek Thumu Â© 2024
    <div class="myicon YouTube"  onclick='openURL("https://www.youtube.com/@vivektelugulibrary6033")'><svg fill="#ffffff" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 97.75 97.75" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M39.969,59.587c7.334-3.803,14.604-7.571,21.941-11.376c-7.359-3.84-14.627-7.63-21.941-11.447 C39.969,44.398,39.969,51.954,39.969,59.587z"></path> <path d="M48.875,0C21.883,0,0,21.882,0,48.875S21.883,97.75,48.875,97.75S97.75,75.868,97.75,48.875S75.867,0,48.875,0z M82.176,65.189c-0.846,3.67-3.848,6.377-7.461,6.78c-8.557,0.957-17.217,0.962-25.842,0.957c-8.625,0.005-17.287,0-25.846-0.957 c-3.613-0.403-6.613-3.11-7.457-6.78c-1.203-5.228-1.203-10.933-1.203-16.314s0.014-11.088,1.217-16.314 c0.844-3.67,3.844-6.378,7.457-6.782c8.559-0.956,17.221-0.961,25.846-0.956c8.623-0.005,17.285,0,25.841,0.956 c3.615,0.404,6.617,3.111,7.461,6.782c1.203,5.227,1.193,10.933,1.193,16.314S83.379,59.962,82.176,65.189z"></path> </g> </g> </g></svg></div>
    <div class="myicon LinkedIn" onclick="openURL('https://www.linkedin.com/in/vivek-thumu-179162250/')"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M18.72 3.99997H5.37C5.19793 3.99191 5.02595 4.01786 4.86392 4.07635C4.70189 4.13484 4.55299 4.22471 4.42573 4.34081C4.29848 4.45692 4.19537 4.59699 4.12232 4.75299C4.04927 4.909 4.0077 5.07788 4 5.24997V18.63C4.01008 18.9901 4.15766 19.3328 4.41243 19.5875C4.6672 19.8423 5.00984 19.9899 5.37 20H18.72C19.0701 19.9844 19.4002 19.8322 19.6395 19.5761C19.8788 19.32 20.0082 18.9804 20 18.63V5.24997C20.0029 5.08247 19.9715 4.91616 19.9078 4.76122C19.8441 4.60629 19.7494 4.466 19.6295 4.34895C19.5097 4.23191 19.3672 4.14059 19.2108 4.08058C19.0544 4.02057 18.8874 3.99314 18.72 3.99997ZM9 17.34H6.67V10.21H9V17.34ZM7.89 9.12997C7.72741 9.13564 7.5654 9.10762 7.41416 9.04768C7.26291 8.98774 7.12569 8.89717 7.01113 8.78166C6.89656 8.66615 6.80711 8.5282 6.74841 8.37647C6.6897 8.22474 6.66301 8.06251 6.67 7.89997C6.66281 7.73567 6.69004 7.57169 6.74995 7.41854C6.80986 7.26538 6.90112 7.12644 7.01787 7.01063C7.13463 6.89481 7.2743 6.80468 7.42793 6.74602C7.58157 6.68735 7.74577 6.66145 7.91 6.66997C8.07259 6.66431 8.2346 6.69232 8.38584 6.75226C8.53709 6.8122 8.67431 6.90277 8.78887 7.01828C8.90344 7.13379 8.99289 7.27174 9.05159 7.42347C9.1103 7.5752 9.13699 7.73743 9.13 7.89997C9.13719 8.06427 9.10996 8.22825 9.05005 8.3814C8.99014 8.53456 8.89888 8.6735 8.78213 8.78931C8.66537 8.90513 8.5257 8.99526 8.37207 9.05392C8.21843 9.11259 8.05423 9.13849 7.89 9.12997ZM17.34 17.34H15V13.44C15 12.51 14.67 11.87 13.84 11.87C13.5822 11.8722 13.3313 11.9541 13.1219 12.1045C12.9124 12.2549 12.7546 12.4664 12.67 12.71C12.605 12.8926 12.5778 13.0865 12.59 13.28V17.34H10.29V10.21H12.59V11.21C12.7945 10.8343 13.0988 10.5225 13.4694 10.3089C13.84 10.0954 14.2624 9.98848 14.69 9.99997C16.2 9.99997 17.34 11 17.34 13.13V17.34Z" fill="#ffffff"></path> </g></svg></div>
</div>


<style>
    .myicon{
        width:40px;
        height: 40px;
        margin-left:6px;
        cursor: pointer;
    }
    svg{
        width: 100%;
        height: 100%;
    }
    :root {
        --col1: #FFDD95;
        --col2: #FF9843;
        --col3: #11235A;
        --col4: #11009E;
        --col5:black;
        --col6:#525CEB;
        --col7:#864AF9;
        --col8:#FF004D;
    }
    *{
        /* border:1px black solid; */
    }
    body{
        background-color: var(--col5);
    }
    .wrapper{
        width: 700px;
        position: absolute;
        top:50%;
        left:50%;
        transform: translate(-50%,-50%);
        border-radius: 12px;
        background-color: var(--col1);
    }

    
    .app-current-display{
        display: flex;
        justify-content: center;
        align-items: center;
        background-color:white;
    }
    .app-current{
        text-align: center;
        font-size: 55px;
    }

    .score-display{
        display: flex;
        color: white;
        text-align: center;
        justify-content: space-evenly;
        align-items: center;
        margin-top:3px;
    }

    .wrongs-board{
        border-bottom-left-radius: 12px;
        flex:1;
        background-color: var(--col8);
    }
    .time-board{
        flex:1;
        background-color:var(--col7);
        border-bottom-right-radius: 12px;
    }
    .score-board{
        flex:1;
        background-color:var(--col6);
        border-right: 1px black solid;
        border-left: 1px black solid;
    }


    .app-options{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding:5px 2px;
    }

    .app-option{
        padding: 3px;
        border-radius: 4px;
        color:white;
        background-color:var(--col3);
        margin:4px;
        cursor: pointer;
    }

    .app-title{
        font-family: 'oswald', serif;
        font-weight: 500;
        font-size:30px;
        height:50px;
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: var(--col2);
        border-top-left-radius: 12px;
        border-top-right-radius: 12px;

    }
    .app-body{
        display: flex;
        flex-wrap: wrap;
        font-family: 'Times New Roman', Times, serif;
    }
    .app-body-letter{
        display: flex;
        justify-content: center;
        align-items: center;
        width: 25px;
        height: 25px;
        padding: 4px;
        margin: 3px;
        border-radius:50%;
        color:white;
        background-color:var(--col4);
    }

    .selected{
        background-color: #525CEB;
    }

</style>
<script>
    var randomchars;
    var currIdx;
    maxChars =60;
    var appBodyLetters;
    appCurrent = document.querySelector(".app-current");
    var prevType; 


    wrongs = 0;
    var wrongsBoard;
    var scoreBoard; 
    var timeBoard;


    var seconds = 0;
    var minutes = 0;
    var hours = 0;
    var timeoutId;



    function openURL(url) {
      window.open(url, '_blank');
    }

    document.addEventListener("DOMContentLoaded", function() {
        currIdx = 0;
        appBodyLetters = document.querySelectorAll(".app-body-letter");
        document.addEventListener("keydown", function(event) {
            const pressedKey = event.key;
            if(pressedKey == "Shift")return;
            if (pressedKey === randomchars[currIdx]) {
                appBodyLetters[currIdx].style.backgroundColor = "red";
                currIdx++;
                scoreBoard.textContent = `${currIdx}/${maxChars}`;
                if (currIdx === maxChars) {
                    clearTimeout(timeoutId);
                    totalSeconds = seconds+minutes*60+hours*60*60
                    totalMinutes = totalSeconds / 60;

                    typingSpeed = parseFloat((maxChars / totalMinutes).toFixed(3));
                    accuracyPercentage = Math.round((maxChars / (maxChars+wrongs)) * 100);


                    wrongsText = `${wrongs} ${wrongs === 1 ? 'Wrong' : 'Wrongs'}`;
                    let timeTakenText = '';
                    if (hours > 0) {
                            timeTakenText += `${hours} Hour${hours > 1 ? 's' : ''}, `;
                        }
                    if (minutes > 0) {
                            timeTakenText += `${minutes} Minute${minutes > 1 ? 's' : ''}, `;
                        }

                    timeTakenText += `${seconds} Second${seconds > 1 ? 's' : ''}`;

                    swalContent = `Time Taken: ${timeTakenText} <br>
                        Typing Speed: ${typingSpeed} Characters Per Minute <br>
                        ${wrongsText} , Accuracy: ${accuracyPercentage}%`;
                    Swal.fire({
                        title: "You have completed ",
                        html: swalContent,
                        icon: "success",
                        showCancelButton: true,
                        confirmButtonText: "Restart",
                        cancelButtonText: "Cancel",
                        }).then((result) => {
                        if (result.isConfirmed) {
                            makeAppBody(prevType,null);
                            runTimer();
                        }
                    });

                } else {
                    appCurrent.textContent = randomchars[currIdx];
                }
            } else {

                wrongs++;
                wrongsBoard.textContent = `${wrongs} ${wrongs === 1 ? 'Wrong' : 'Wrongs'}`;


                appCurrent.classList.add('animate__animated', 'animate__shakeX');
                appCurrent.style.color = "red";
                appCurrent.addEventListener('animationend', () => {
                    appCurrent.classList.remove("animate__animated", "animate__shakeX", "animate__delay-3s");
                    appCurrent.style.color = "black";
                });
            }

        });
    });

    const systemKeys = [
        'F1', 'F2', 'F3', 'F4', 'F5', 'F6', 'F7', 'F8', 'F9', 'F10', 'F11', 'F12',
        'ArrowUp', 'ArrowDown', 'ArrowRight', 'ArrowLeft',
        'AudioVolumeMute', 'AudioVolumeDown', 'AudioVolumeUp', 'Insert', 'Delete'
    ];


    // function for generateChars
    function generateChars(type = 'Capitals', length = maxChars) {
        let characters = '';
        switch (type.toLowerCase()) {
            case "alphabets": 
                characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
                break;
            case 'capitals':
                characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                break;
            case 'smalls':
                characters = 'abcdefghijklmnopqrstuvwxyz';
                break;
            case 'numbers':
                characters = '0123456789';
                break;
            case 'symbols':
                characters = '`~!@#$%^&*()_-+={[}]|:;"\'<,>.?/';
                break;
            case 'system':
                characters = systemKeys
                break;
            case 'mixed':
                characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`~!@#$%^&*()_-+={[}]|:;"\'<,>.?/';
                break;
            case "lefthand": 
                characters = "AQZWSXEDCRFVTGBqazwsxedcrfv123!@#";
                break;
            case "righthand": 
                characters = "^YHN6yhn&UJM7ujm*IK<8ik,(OL>9ol.)P:?0p;/_-+={[]}|'\\\"";
                break;


            case "lefthandwright": 
                characters = "!QAZ@WSX#EDC$RFV%TGB";
                break;
            case "righthandwleft": 
                characters = "^YHN&UJM*IK<(OL>)P:?_{\"+}|";
                break;
            case "lefthandworight": 
                characters = "1qaz2wsx3edc4rfv5tgb";
                break;
            case "righthandwoleft": 
                characters = "6yhn7ujm8ik,9ol.0p;/-['=]\\";
                break;
            
            case "custom":
                customTextInput = document.getElementById('custom_text');
                customTextValue = customTextInput.value.trim();
                if (customTextValue.length === 0) {
                    customTextInput.value = "ABC"
                    characters = "ABC";
                } else {
                    characters = customTextValue;
                }
                break;
            default:
                console.error('Invalid character type.');
                return;
        }
        return generateRandomString(characters, length);
    }

    // helper function for generateChars
    function generateRandomString(characters, length) {
        let result = [];
        const charCount = characters.length;
        for (let i = 0; i < length; i++) {
            const randomIndex = Math.floor(Math.random() * charCount);
            result.push(characters[randomIndex]);
        }
        return result;
    }

    function makeAppBody(chars = "Capitals",element=null) {

        allAppOptions = document.querySelectorAll('.app-option');
        allAppOptions.forEach(option => option.classList.remove('selected'));
        if (element) {
            element.classList.add("selected");
        }


        prevType = chars; //for refresh or restart;
        const appBody = document.querySelector(".app-body");

        randomchars = generateChars(chars, maxChars);
        appBody.textContent = "";

        for (const char of randomchars) {
            const letterDiv = document.createElement("div");
            letterDiv.classList.add("app-body-letter");
            letterDiv.textContent = char;
            appBody.appendChild(letterDiv);
        }
        appCurrent.textContent = randomchars[0];
        currIdx = 0;
        appBodyLetters = document.querySelectorAll(".app-body-letter");


        
        // For score Board
        wrongsBoard = document.querySelector('.wrongs-board');
        scoreBoard = document.querySelector('.score-board');
        timeBoard = document.querySelector('.time-board');

        wrongs = 0;

        wrongsBoard.textContent = "0 Wrongs";
        scoreBoard.textContent = `${currIdx}/${maxChars}`;
        timeBoard.textContent = "Time:00:00:00";

        seconds = 0;
        minutes = 0;
        hours = 0;
    }





    function runTimer(){
        function updateStopwatch() {
        seconds++;
        if (seconds === 60) {
            seconds = 0;
            minutes++;
            if (minutes === 60) {
            minutes = 0;
            hours++;
            }
        }

        const formattedTime = `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
        timeBoard.textContent = `Time: ${formattedTime}`;
         timeoutId  = setTimeout(updateStopwatch, 1000); // Update every 1000ms (1 second)
        }

        function pad(num) {
        return num < 10 ? `0${num}` : num;
        }

        // Start the stopwatch
        updateStopwatch();
    }

    makeAppBody();
    runTimer();




    
    





    





</script>
